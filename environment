# HCA DSS environment variables
#
# Source this file in your bash shell using "source environment".
#
# The environment variables set in this file are appropriate for the
# HCA DSS development environment. Individual environment variable
# values are overridden when deployed, based on the deployment stage.
# That logic resides in {chalice,daemons}/build_deploy_config.sh.

# TODO: (akislyuk) document configuration ingestion order

# Resolve the location of this file and set DSS_HOME to the root
SOURCE="${BASH_SOURCE[0]}"
while [ -h "$SOURCE" ] ; do SOURCE="$(readlink "$SOURCE")"; done
export DSS_HOME="$(cd -P "$(dirname "$SOURCE")" && pwd)"

set -a
EXPORT_ENV_VARS_TO_LAMBDA="DSS_DEPLOYMENT_STAGE DSS_ES_ENDPOINT"
EXPORT_ENV_PREFIXES_TO_LAMBDA="DSS_S3_BUCKET_ DSS_GS_BUCKET_"
DSS_DEPLOYMENT_STAGE=dev
AWS_DEFAULT_REGION=us-east-1
DSS_S3_BUCKET_DEV=org-humancellatlas-dss-dev
DSS_S3_BUCKET_TEST=org-humancellatlas-dss-test
DSS_S3_BUCKET_TEST_FIXTURES=org-humancellatlas-dss-test-fixtures
DSS_GS_BUCKET_DEV=org-humancellatlas-dss-dev
DSS_GS_BUCKET_TEST=org-humancellatlas-dss-test
DSS_GS_BUCKET_TEST_FIXTURES=org-humancellatlas-dss-test-fixtures
GOOGLE_APPLICATION_CREDENTIALS="${DSS_HOME}/gcp-credentials.json"
set +a

if [[ -f "${DSS_HOME}/environment.local" ]]; then
    source "${DSS_HOME}/environment.local"
fi
